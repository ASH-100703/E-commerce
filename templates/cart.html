{% extends 'base.html' %}
{% block title %}Cart{% endblock %}
{% block content %}
<h2>Your Cart</h2>
<ul class="cart-list">
    {% if cart_items %}
        {% for item in cart_items %}
            <li>
                <div class="item-details">
                    <img src="{{ url_for('static', filename='images/' + item.product.image_url) if item.product.image_url else 'https://via.placeholder.com/150' }}" alt="{{ item.product.name }}">
                    {{ item.product.name }} - ${{ "%.2f"|format(item.product.price) }} (x{{ item.quantity }})
                </div>
                <form method="GET" action="{{ url_for('decrease_quantity', product_id=item.product.id) }}" style="display:inline;">
                    <button type="submit">âˆ’</button>
                </form>
                <form method="POST" action="{{ url_for('update_quantity', product_id=item.product.id) }}" style="display:inline;" onchange="this.submit()">
                    <input type="number" name="quantity" value="{{ item.quantity }}" min="1" style="width:40px; text-align:center;">
                </form>
                <form method="GET" action="{{ url_for('increase_quantity', product_id=item.product.id) }}" style="display:inline;">
                    <button type="submit">+</button>
                </form>
                <a href="{{ url_for('remove_from_cart', product_id=item.product.id) }}" class="button remove-button">Remove</a>
            </li>
        {% endfor %}
        <p class="total">Total: ${{ "%.2f"|format(total_price) }}</p>
        <div class="checkout-container">
            <a href="{{ url_for('checkout') }}" class="button checkout-button">Proceed to Checkout</a>
        </div>
    {% else %}
        <p>Your cart is empty.</p>
    {% endif %}
</ul>
{% endblock %}
